{"ast":null,"code":"import _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _inherits from \"@babel/runtime/helpers/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/getPrototypeOf\";\nvar _jsxFileName = \"F:\\\\Bai_hoc\\\\Nam 4\\\\HK1\\\\DDNC\\\\Seminar\\\\Firebase Chat app\\\\FirebaseChat\\\\src\\\\component\\\\Chat.js\";\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nimport { StatusBar } from 'expo-status-bar';\nimport React, { useEffect, useState } from 'react';\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport View from \"react-native-web/dist/exports/View\";\nimport Platform from \"react-native-web/dist/exports/Platform\";\nimport KeyboardAvoidingView from \"react-native-web/dist/exports/KeyboardAvoidingView\";\nimport SafeAreaView from \"react-native-web/dist/exports/SafeAreaView\";\nimport { GiftedChat } from \"react-native-gifted-chat\";\nimport Fire from \"../../Fire\";\n\nvar Chat = function (_React$Component) {\n  _inherits(Chat, _React$Component);\n\n  var _super = _createSuper(Chat);\n\n  function Chat() {\n    var _this;\n\n    _classCallCheck(this, Chat);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _super.call.apply(_super, [this].concat(args));\n    _this.state = {\n      messages: []\n    };\n    return _this;\n  }\n\n  _createClass(Chat, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      Fire.get(function (message) {\n        return _this2.setState(function (previous) {\n          messages: GiftedChat.append(previous.messages, message);\n        });\n      });\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      Fire.off();\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var chat = React.createElement(GiftedChat, {\n        messages: this.state.messages,\n        onSend: Fire.send,\n        user: this.user,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 32,\n          columnNumber: 20\n        }\n      });\n\n      if (Platform.OS === \"android\") {\n        return React.createElement(KeyboardAvoidingView, {\n          style: {\n            flex: 1\n          },\n          behavior: \"padding\",\n          keyboardVerticalOffset: 30,\n          enabled: true,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 37,\n            columnNumber: 17\n          }\n        }, chat);\n      }\n\n      return React.createElement(SafeAreaView, {\n        style: {\n          flex: 1\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 43,\n          columnNumber: 13\n        }\n      }, chat);\n    }\n  }, {\n    key: \"user\",\n    get: function get() {\n      return {\n        _id: Fire.uid,\n        name: this.props.navigation.state.params.name\n      };\n    }\n  }]);\n\n  return Chat;\n}(React.Component);\n\nexport { Chat as default };\nvar styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    backgroundColor: '#fff',\n    alignItems: 'center',\n    justifyContent: 'center'\n  }\n});","map":{"version":3,"sources":["F:/Bai_hoc/Nam 4/HK1/DDNC/Seminar/Firebase Chat app/FirebaseChat/src/component/Chat.js"],"names":["StatusBar","React","useEffect","useState","GiftedChat","Fire","Chat","state","messages","get","message","setState","previous","append","off","chat","send","user","Platform","OS","flex","_id","uid","name","props","navigation","params","Component","styles","StyleSheet","create","container","backgroundColor","alignItems","justifyContent"],"mappings":";;;;;;;;;;;AAAA,SAASA,SAAT,QAA0B,iBAA1B;AACA,OAAOC,KAAP,IAAcC,SAAd,EAAyBC,QAAzB,QAAwC,OAAxC;;;;;;;AAGA,SAAQC,UAAR,QAAyB,0BAAzB;AACA,OAAOC,IAAP;;IACqBC,I;;;;;;;;;;;;;;;UACjBC,K,GAAM;AACFC,MAAAA,QAAQ,EAAC;AADP,K;;;;;;wCAcN;AAAA;;AACIH,MAAAA,IAAI,CAACI,GAAL,CAAS,UAAAC,OAAO;AAAA,eAAE,MAAI,CAACC,QAAL,CAAc,UAAAC,QAAQ,EAAE;AACtCJ,UAAAA,QAAQ,EAACJ,UAAU,CAACS,MAAX,CAAkBD,QAAQ,CAACJ,QAA3B,EAAoCE,OAApC;AACZ,SAFiB,CAAF;AAAA,OAAhB;AAGH;;;2CAED;AACIL,MAAAA,IAAI,CAACS,GAAL;AACH;;;6BACO;AACJ,UAAMC,IAAI,GAAC,oBAAC,UAAD;AAAY,QAAA,QAAQ,EAAE,KAAKR,KAAL,CAAWC,QAAjC;AAA2C,QAAA,MAAM,EAAEH,IAAI,CAACW,IAAxD;AAA8D,QAAA,IAAI,EAAE,KAAKC,IAAzE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAAX;;AACA,UAAGC,QAAQ,CAACC,EAAT,KAAc,SAAjB,EACA;AACI,eAEI,oBAAC,oBAAD;AAAsB,UAAA,KAAK,EAAE;AAACC,YAAAA,IAAI,EAAC;AAAN,WAA7B;AAAuC,UAAA,QAAQ,EAAC,SAAhD;AAA0D,UAAA,sBAAsB,EAAE,EAAlF;AAAsF,UAAA,OAAO,MAA7F;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WACKL,IADL,CAFJ;AAMH;;AACD,aACI,oBAAC,YAAD;AAAc,QAAA,KAAK,EAAE;AAACK,UAAAA,IAAI,EAAC;AAAN,SAArB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACKL,IADL,CADJ;AAMH;;;wBAnCD;AACI,aAAM;AACFM,QAAAA,GAAG,EAAChB,IAAI,CAACiB,GADP;AAEFC,QAAAA,IAAI,EAAC,KAAKC,KAAL,CAAWC,UAAX,CAAsBlB,KAAtB,CAA4BmB,MAA5B,CAAmCH;AAFtC,OAAN;AAKH;;;;EAZ6BtB,KAAK,CAAC0B,S;;SAAnBrB,I;AA4FrB,IAAMsB,MAAM,GAAGC,UAAU,CAACC,MAAX,CAAkB;AAC/BC,EAAAA,SAAS,EAAE;AACTX,IAAAA,IAAI,EAAE,CADG;AAETY,IAAAA,eAAe,EAAE,MAFR;AAGTC,IAAAA,UAAU,EAAE,QAHH;AAITC,IAAAA,cAAc,EAAE;AAJP;AADoB,CAAlB,CAAf","sourcesContent":["import { StatusBar } from 'expo-status-bar';\r\nimport React,{useEffect, useState} from 'react';\r\nimport { StyleSheet, Text, View,Platform,KeyboardAvoidingView,SafeAreaView } from 'react-native';\r\n\r\nimport {GiftedChat} from \"react-native-gifted-chat\";\r\nimport Fire from \"../../Fire\";\r\nexport default class Chat extends React.Component{\r\n    state={\r\n        messages:[]\r\n    };\r\n\r\n    get user()\r\n    {\r\n        return{\r\n            _id:Fire.uid,\r\n            name:this.props.navigation.state.params.name\r\n\r\n        }\r\n    }\r\n\r\n    componentDidMount()\r\n    {\r\n        Fire.get(message=>this.setState(previous=>{\r\n            messages:GiftedChat.append(previous.messages,message);\r\n        }))\r\n    }\r\n    componentWillUnmount()\r\n    {\r\n        Fire.off();\r\n    }\r\n    render(){\r\n        const chat=<GiftedChat messages={this.state.messages} onSend={Fire.send} user={this.user}/>\r\n        if(Platform.OS===\"android\")\r\n        {\r\n            return (\r\n                \r\n                <KeyboardAvoidingView style={{flex:1}} behavior=\"padding\" keyboardVerticalOffset={30} enabled>\r\n                    {chat}\r\n                </KeyboardAvoidingView>\r\n            )\r\n        }\r\n        return (\r\n            <SafeAreaView style={{flex:1}}>\r\n                {chat}\r\n       \r\n            </SafeAreaView>\r\n        );\r\n    }\r\n}\r\n// const Chat=(props) =>{\r\n\r\n//     console.log(\"Check params:\",props.navigation.state.params)\r\n//     console.log(\"Fire uid:\",Fire.uid);\r\n\r\n//     const [messages,setMessages]=useState([]);\r\n//     const [user,setUser]=useState(null);\r\n    \r\n//     const onChangeMessage=(message)=>{\r\n//         let temp=messages;\r\n//         temp=temp.concat(message);\r\n//         setMessages(temp);\r\n//     }\r\n//     useEffect(()=>{\r\n//         if(user===null)\r\n//         {\r\n//             setUser({\r\n//                 _id:Fire.uid,\r\n//                 name:props.navigation.state.params.name\r\n\r\n//             })\r\n//         }\r\n//         Fire.get(message=>onChangeMessage(message));\r\n\r\n//         return ()=>{\r\n//             Fire.off();\r\n//         }\r\n//     },[messages])\r\n//     const chat=<GiftedChat messages={messages} onSend={Fire.send} user={user}/>;\r\n\r\n//     if(Platform.OS===\"android\")\r\n//     {\r\n//         return (\r\n            \r\n//             <KeyboardAvoidingView style={{flex:1}} behavior=\"padding\" keyboardVerticalOffset={30} enabled>\r\n//                 {chat}\r\n//             </KeyboardAvoidingView>\r\n//         )\r\n//     }\r\n//     return (\r\n//         <SafeAreaView style={{flex:1}}>\r\n//             {chat}\r\n   \r\n//         </SafeAreaView>\r\n//     );\r\n\r\n   \r\n// }\r\n\r\nconst styles = StyleSheet.create({\r\n  container: {\r\n    flex: 1,\r\n    backgroundColor: '#fff',\r\n    alignItems: 'center',\r\n    justifyContent: 'center',\r\n  },\r\n});\r\n"]},"metadata":{},"sourceType":"module"}